<!DOCTYPE html>
<html lang="en">
<head>
    <title>GuiLite preview</title>
</head>
<body>
    <canvas id="screen" width="1024" height="768"></canvas>
</body>

<script type="text/javascript">
function draw_single_widget(context, str, rect){
    console.log(rect.toString());
    context.fillStyle = "#FF0000";
    context.fillRect(rect[0], rect[1], rect[2], rect[3]);
    context.fillText(str, rect[0], rect[1]);
}

function draw_widgets(context, widgets){
    for( var i = 0; i < widgets.length; i++){
        rect = widgets[i].match(/[^A-Za-z_]\d+/g);
        string = "null"
        strings = widgets[i].match(/".*"/g);
        if(strings.length != 1){
            console.log('Invalid strings' + strings.length.toString() + ':' + strings.toString());
        }else{
            string = strings[0].replace(/"/g,'');//remove "
        }
        console.log(string.toString() + rect.toString());
        draw_single_widget(context, string, rect)
    }
}

function search_widgets(tree){
    var widgets = tree.match(/{ *&[^,]*,[^,]*,[^,]*,[^,]*,[^,]*,[^,]*,[^,]*/g);
    console.log(widgets.length.toString() + ':' + widgets.toString());
    return widgets;
}

function search_trees(source){
    var trees = source.match(/WND_TREE[\s\S]*};$/g);
    console.log(trees.length.toString() + ':' + trees.toString());
    return trees;
}

    const canvas = document.getElementById('screen');
    const context = canvas.getContext('2d');
    var source_code = `WND_TREE s_main_widgets[] =
{
	{ &s_edit,		ID_EDIT,	"Input",	275, 10, 100, 50},

	{ &s_label_1,	ID_LABEL_1,	"label 1",	150, 100, 100, 50},
	{ &s_label_2,	ID_LABEL_2,	"label 2",	150, 170, 100, 50},
	{ &s_label_3,	ID_LABEL_3,	"label 3",	150, 240, 100, 50},

	{ &s_button,	ID_BUTTON,	"Dialog",	400, 100, 100, 50},
	{ &s_spin_box,	ID_SPIN_BOX,"spinBox",	400, 170, 100, 50},
	{ &s_list_box,	ID_LIST_BOX,"listBox",	400, 240, 100, 50},

	{NULL, 0 , 0, 0, 0, 0, 0}
};`;

    var trees = search_trees(source_code);
    for( var i = 0; i < trees.length; i++){
    	var widgets = search_widgets(trees[i]);
    	draw_widgets(context, widgets);
    }
    
</script>
</html>